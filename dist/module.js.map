{"mappings":";;;AAEA,KAAK,CAAC,iCAAW,GAAG,YAAK,CAAC,MAAM;AAChC,GAAG,CAAC,8BAAQ;AAEZ,EAAS,AAAT,mBAAqB;AACT,GAAT,CAAC,mCAAa,GAAG,CAAC;AAAA,CAAC;AAEtB,YAAK,CAAC,MAAM,GAAG,QAAQ,CAAE,MAAM,EAAE,CAAC;IAC9B,GAAG,CAAC,QAAQ,GAAG,iCAAW,CAAC,MAAM;IACjC,8BAAQ,GAAG,QAAQ,CAAC,GAAG;IAEvB,QAAQ,CAAC,GAAG,GAAG,QAAQ,CAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;QACxC,EAMK,AANL,2PAMK,AANL,EAMK,CAEL,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;YACjB,KAAK,EAAE,KAAK;QAChB,CAAC,EAAE,GAAG,IAAI,CAAC;QAAA,CAAC;QAEZ,GAAG,CAAC,SAAS,GAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,MAAM,CAAiB,mBAAI,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAE;QAC5G,GAAG,CAAC,UAAU,IAAK,QAAQ,EAAE,GAAG,CAAC,CAAC,EAAE,SAAS;QAE7C,EAAE,GAAE,mCAAa,CAAC,UAAU,GAAE,CAAC;YAC3B,mCAAa,CAAC,UAAU,IAAI,8BAAQ,CAAC,GAAG,EAAE,MAAM;YAEhD,EAAE,EAAE,GAAG,CAAC,KAAK,EACT,mCAAa,CAAC,UAAU,EAAE,KAAK,KAAO,CAAC;gBACnC,MAAM,CAAC,mCAAa,CAAC,UAAU;YACnC,CAAC;iBAED,mCAAa,CAAC,UAAU,EAAE,OAAO,KAAO,CAAC;gBACrC,MAAM,CAAC,mCAAa,CAAC,UAAU;YACnC,CAAC;YAEL,MAAM,CAAC,mCAAa,CAAC,UAAU;QACnC,CAAC;QAED,MAAM,CAAC,mCAAa,CAAC,UAAU;IACnC,CAAC;IAED,MAAM,CAAC,QAAQ;AACnB,CAAC;IAED,wCAAqB,GAAN,yDAAK","sources":["src/axios-cache.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst axiosCreate = axios.create;\r\nlet axiosGet;\r\n\r\n// 请求缓存对象\r\nlet responseCache = {}\r\n\r\naxios.create = function (config) {\r\n    let instance = axiosCreate(config);\r\n    axiosGet = instance.get;\r\n\r\n    instance.get = function (url, params, opt) {\r\n        /**\r\n         * get请求缓存功能\r\n         * @param url[String] 请求地址\r\n         * @param params[Object] 请求参数\r\n         * @param opt[Object] 扩展配置，默认值{cache: true}\r\n         * @return [Promise] 请求Promse\r\n         * */\r\n\r\n        opt = Object.assign({\r\n            cache: false\r\n        }, opt || {})\r\n\r\n        let paramsStr = (Object.prototype.toString.call(params) === '[object Object]') ? JSON.stringify(params) : ''\r\n        let requestKey = (`request_${url}?${paramsStr}`)\r\n\r\n        if(!responseCache[requestKey]){\r\n            responseCache[requestKey] = axiosGet(url, params)\r\n\r\n            if (opt.cache) {\r\n                responseCache[requestKey].catch(() => {\r\n                    delete responseCache[requestKey];\r\n                })\r\n            } else {\r\n                responseCache[requestKey].finally(() => {\r\n                    delete responseCache[requestKey];\r\n                })\r\n            }\r\n            return responseCache[requestKey]\r\n        }\r\n\r\n        return responseCache[requestKey]\r\n    }\r\n\r\n    return instance;\r\n}\r\n\r\nexport default axios;\r\n"],"names":[],"version":3,"file":"module.js.map"}